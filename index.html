<!DOCTYPE html>
<html>
<head>
    <title>æ‰˜è‚²æ¯æ—¥æŠ¥å‘Šç”Ÿæˆå™¨</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- å¼•å…¥html2canvasåº“ç”¨äºå¯¼å‡ºå›¾ç‰‡ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: #f0f4f8;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            color: #2c5282;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .form-section {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #4a5568;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .photo-box {
            aspect-ratio: 4/3;
            background: #edf2f7;
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
            position: relative;
            transition: all 0.3s ease;
        }

        .photo-box:hover {
            border-color: #4299e1;
        }

        .photo-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .rating-section {
            text-align: center;
            margin: 15px 0;
        }

        .emoji-rating {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
        }

        .emoji-btn {
            font-size: 28px;
            cursor: pointer;
            border: none;
            background: none;
            padding: 5px;
            transition: transform 0.2s;
            opacity: 0.5;
        }

        .emoji-btn:hover {
            transform: scale(1.2);
            opacity: 0.8;
        }

        .emoji-btn.active {
            transform: scale(1.2);
            opacity: 1;
        }

        .comment-section {
            margin-top: 15px;
        }

        .comment-select {
            width: 100%;
            padding: 8px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .comment-box {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            height: 80px;
            font-size: 14px;
            resize: none;
        }

        .generate-btn {
            width: 100%;
            padding: 12px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s ease;
        }

        .generate-btn:hover {
            background: #3182ce;
        }

        #previewSection {
            display: none;
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            color: white;
            font-size: 14px;
            transition: opacity 0.3s ease;
        }

        .download-btn {
            background: #48bb78;
        }

        .new-btn {
            background: #ed8936;
        }

        .action-btn:hover {
            opacity: 0.9;
        }

        .preview-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }

        .preview-header {
            text-align: center;
            padding: 20px;
            background: #f7fafc;
            border-bottom: 1px solid #edf2f7;
        }

        .preview-content {
            padding: 20px;
        }

        .preview-photos {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .preview-comment {
            background: #f8fafc;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .preview-signature {
            text-align: right;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #edf2f7;
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            .photo-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸŒŸ æ‰˜è‚²æ¯æ—¥æŠ¥å‘Š ğŸŒŸ</h1>
        </div>

        <!-- åŸºæœ¬ä¿¡æ¯éƒ¨åˆ† -->
        <div class="form-section">
            <div class="form-group">
                <label>å°æœ‹å‹å§“åï¼š</label>
                <input type="text" id="studentName" placeholder="è¯·è¾“å…¥å§“å">
            </div>
            <div class="form-group">
                <label>ç­çº§ï¼š</label>
                <input type="text" id="className" placeholder="è¯·è¾“å…¥ç­çº§">
            </div>
        </div>

        <!-- ç…§ç‰‡ä¸Šä¼ éƒ¨åˆ† -->
        <div class="form-section">
            <h3>ğŸ“¸ æ‰˜è‚²ç¬é—´</h3>
            <div class="photo-grid">
                <div class="photo-box" onclick="document.getElementById('photo1').click()">
                    <input type="file" id="photo1" hidden accept="image/*">
                    <span>åŠŸè¯¾è¡¨ç°</span>
                </div>
                <div class="photo-box" onclick="document.getElementById('photo2').click()">
                    <input type="file" id="photo2" hidden accept="image/*">
                    <span>å¬å†™è¿›æ­¥</span>
                </div>
                <div class="photo-box" onclick="document.getElementById('photo3').click()">
                    <input type="file" id="photo3" hidden accept="image/*">
                    <span>ç”Ÿæ´»è®°å½•</span>
                </div>
                <div class="photo-box" onclick="document.getElementById('photo4').click()">
                    <input type="file" id="photo4" hidden accept="image/*">
                    <span>æ´»åŠ¨è¡¨ç°</span>
                </div>
            </div>
        </div>

        <!-- è¯„ä»·éƒ¨åˆ† -->
        <div class="form-section">
            <h3>ğŸ“ è¡¨ç°è¯„ä»·</h3>
            
            <!-- åŠŸè¯¾è¡¨ç° -->
            <div class="form-group">
                <label>åŠŸè¯¾è¡¨ç°</label>
                <div class="emoji-rating" id="homeworkRating">
                    <button class="emoji-btn" onclick="setRating('homework', 1)">â­</button>
                    <button class="emoji-btn" onclick="setRating('homework', 2)">â­â­</button>
                    <button class="emoji-btn" onclick="setRating('homework', 3)">â­â­â­</button>
                </div>
                <div class="comment-section">
                    <select class="comment-select" id="homeworkSelect" onchange="updateComment('homework', this.value)">
                        <option value="">é€‰æ‹©è¯„è¯­...</option>
                    </select>
                    <textarea class="comment-box" id="homeworkComment" placeholder="è¯·é€‰æ‹©æˆ–è¾“å…¥è¯„è¯­..."></textarea>
                </div>
            </div>

            <!-- å¬å†™è¡¨ç° -->
            <div class="form-group">
                <label>å¬å†™è¡¨ç°</label>
                <div class="emoji-rating" id="dictationRating">
                    <button class="emoji-btn" onclick="setRating('dictation', 1)">â­</button>
                    <button class="emoji-btn" onclick="setRating('dictation', 2)">â­â­</button>
                    <button class="emoji-btn" onclick="setRating('dictation', 3)">â­â­â­</button>
                </div>
                <div class="comment-section">
                    <select class="comment-select" id="dictationSelect" onchange="updateComment('dictation', this.value)">
                        <option value="">é€‰æ‹©è¯„è¯­...</option>
                    </select>
                    <textarea class="comment-box" id="dictationComment" placeholder="è¯·é€‰æ‹©æˆ–è¾“å…¥è¯„è¯­..."></textarea>
                </div>
            </div>

            <!-- é¥®æ°´ä¹ æƒ¯ -->
            <div class="form-group">
                <label>é¥®æ°´ä¹ æƒ¯</label>
                <div class="emoji-rating" id="waterRating">
                    <button class="emoji-btn" onclick="setRating('water', 1)">â­</button>
                    <button class="emoji-btn" onclick="setRating('water', 2)">â­â­</button>
                    <button class="emoji-btn" onclick="setRating('water', 3)">â­â­â­</button>
                </div>
                <div class="comment-section">
                    <select class="comment-select" id="waterSelect" onchange="updateComment('water', this.value)">
                        <option value="">é€‰æ‹©è¯„è¯­...</option>
                    </select>
                    <textarea class="comment-box" id="waterComment" placeholder="è¯·é€‰æ‹©æˆ–è¾“å…¥è¯„è¯­..."></textarea>
                </div>
            </div>

            <!-- å­¦ä¹ æ€åº¦ -->
            <div class="form-group">
                <label>å­¦ä¹ æ€åº¦</label>
                <div class="emoji-rating" id="attitudeRating">
                    <button class="emoji-btn" onclick="setRating('attitude', 1)">â­</button>
                    <button class="emoji-btn" onclick="setRating('attitude', 2)">â­â­</button>
                    <button class="emoji-btn" onclick="setRating('attitude', 3)">â­â­â­</button>
                </div>
                <div class="comment-section">
                    <select class="comment-select" id="attitudeSelect" onchange="updateComment('attitude', this.value)">
                        <option value="">é€‰æ‹©è¯„è¯­...</option>
                    </select>
                    <textarea class="comment-box" id="attitudeComment" placeholder="è¯·é€‰æ‹©æˆ–è¾“å…¥è¯„è¯­..."></textarea>
                </div>
            </div>
        </div>

        <button class="generate-btn" onclick="generateReport()">ç”ŸæˆæŠ¥å‘Š</button>

        <!-- é¢„è§ˆéƒ¨åˆ† -->
        <div id="previewSection">
            <h2>é¢„è§ˆ</h2>
            <div id="reportPreview" class="preview-card"></div>
            <div class="action-buttons">
                <button class="action-btn download-btn" onclick="downloadReport()">ä¿å­˜å›¾ç‰‡</button>
                <button class="action-btn new-btn" onclick="resetForm()">æ–°å»ºæŠ¥å‘Š</button>
            </div>
        </div>
    </div><script>
        // é¢„è®¾è¯„è¯­æ•°æ®åº“
        const presetComments = {
            homework: {
                excellent: [
                    "ä»Šå¤©çš„åŠŸè¯¾å®Œæˆå¾—éå¸¸æ£’ï¼è®¤çœŸç»†è‡´ï¼Œå­—è¿¹å·¥æ•´ï¼Œæ˜¯ä¸ªå¥½æ¦œæ ·ï¼ğŸ‘",
                    "ä½œä¸šå®Œæˆåº¦éå¸¸é«˜ï¼Œå±•ç°å‡ºå¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›ï¼Œç»§ç»­ä¿æŒï¼ğŸ’ª",
                    "ç‹¬ç«‹å®Œæˆæ‰€æœ‰ä½œä¸šï¼Œæ€è·¯æ¸…æ™°ï¼Œè§£é¢˜å‡†ç¡®ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼â­",
                    "ä½œä¸šæ•´æ´æœ‰åºï¼Œè®¤çœŸè´Ÿè´£ï¼Œæ˜¯ä¸ªè®©è€å¸ˆéª„å‚²çš„å¥½å­©å­ï¼ğŸŒŸ"
                ],
                good: [
                    "ä»Šå¤©çš„ä½œä¸šå®Œæˆå¾—ä¸é”™ï¼Œç»§ç»­åŠ æ²¹å“¦ï¼ğŸ“š",
                    "æœ‰è®¤çœŸå®Œæˆä½œä¸šï¼Œæ³¨æ„ç»†èŠ‚ä¼šæ›´å¥½ï¼âœï¸",
                    "ä½œä¸šæ€åº¦ç«¯æ­£ï¼Œå†å¤šä¸€ç‚¹è€å¿ƒå°±æ›´å®Œç¾å•¦ï¼ğŸ’«",
                    "åŸºæœ¬å®Œæˆäº†ä»Šå¤©çš„åŠŸè¯¾ï¼Œæ˜å¤©ç»§ç»­åŠªåŠ›ï¼ğŸ¯"
                ],
                normal: [
                    "ä½œä¸šå®Œæˆå¾—è¿˜å¯ä»¥ï¼Œä½†è¿˜éœ€è¦æ›´åŠ ç»†å¿ƒå“¦ï¼ğŸ’",
                    "å†™å­—è¦å†å·¥æ•´ä¸€ç‚¹ç‚¹ï¼Œç›¸ä¿¡ä½ å¯ä»¥åšåˆ°çš„ï¼âœ¨",
                    "è¦è®°å¾—æ£€æŸ¥ä½œä¸šå“¦ï¼Œé¿å…å°é”™è¯¯ï¼ğŸŒˆ",
                    "å†å¤šä¸€ç‚¹ç‚¹è€å¿ƒï¼Œä½œä¸šä¼šåšå¾—æ›´å¥½ï¼ğŸŒº"
                ]
            },
            dictation: {
                excellent: [
                    "å¬å†™è¡¨ç°ç‰¹åˆ«ä¼˜ç§€ï¼Œæ­£ç¡®ç‡å¾ˆé«˜ï¼ŒçœŸæ£’ï¼âœ¨",
                    "è®¤çœŸè®°å¿†ç”Ÿå­—ï¼Œå†™å¾—éå¸¸æ ‡å‡†ï¼Œç»§ç»­ä¿æŒï¼ğŸ“",
                    "å¬å†™ä¸“æ³¨è®¤çœŸï¼Œå­—è¿¹å·¥æ•´ï¼Œè®©è€å¸ˆå¾ˆå¼€å¿ƒï¼ğŸ‘",
                    "ä»Šå¤©çš„å¬å†™å®Œæˆå¾—å¾ˆå‡ºè‰²ï¼Œæ˜¯ä¸ªå°è¾¾äººï¼ğŸ¯"
                ],
                good: [
                    "å¬å†™æœ‰è¿›æ­¥ï¼Œç»§ç»­åšæŒå°±ä¼šæ›´å¥½ï¼ğŸ“–",
                    "è®¤çœŸå®Œæˆå¬å†™ï¼Œå¤šåŠ ç»ƒä¹ ä¼šæ›´æ£’ï¼âœï¸",
                    "è®°ä½äº†å¤§éƒ¨åˆ†å†…å®¹ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸ’ª",
                    "å¬å†™æ€åº¦è®¤çœŸï¼Œå†æ¥å†å‰ï¼ğŸŒŸ"
                ],
                normal: [
                    "è¦å¤šå¤šç»ƒä¹ å¬å†™å‘¢ï¼Œç›¸ä¿¡ä½ å¯ä»¥çš„ï¼ğŸ’«",
                    "è®°å¾—å¤šè¯»å‡ éç”Ÿå­—ï¼Œè¿™æ ·è®°å¾—æ›´ç‰¢å“¦ï¼ğŸ“š",
                    "å†™å­—è¦å†ä»”ç»†ä¸€äº›ï¼Œæ…¢æ…¢æ¥ï¼ğŸŒˆ",
                    "è€å¸ˆç›¸ä¿¡ä½ ä¸‹æ¬¡å¯ä»¥åšå¾—æ›´å¥½ï¼ğŸŒº"
                ]
            },
            water: {
                excellent: [
                    "ä»Šå¤©å¾ˆä¹–ï¼ŒæŒ‰æ—¶å–æ°´ï¼Œæ˜¯ä¸ªæ‡‚å¾—å¥åº·çš„å¥½å­©å­ï¼ğŸ’§",
                    "èƒ½å¤Ÿä¸»åŠ¨å–æ°´ï¼Œå…»æˆäº†å¾ˆå¥½çš„ä¹ æƒ¯ï¼ğŸ¥¤",
                    "è®°å¾—è¡¥å……æ°´åˆ†ï¼Œè¿™ä¸ªå¥½ä¹ æƒ¯è¦ç»§ç»­ä¿æŒï¼ğŸ’ª",
                    "ä»Šå¤©çš„é¥®æ°´æƒ…å†µéå¸¸å¥½ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ï¼ğŸŒŸ"
                ],
                good: [
                    "åŸºæœ¬èƒ½è®°å¾—å–æ°´ï¼Œç»§ç»­ä¿æŒè¿™ä¸ªå¥½ä¹ æƒ¯ï¼ğŸ’§",
                    "å–æ°´ä¹ æƒ¯åœ¨æ…¢æ…¢å…»æˆï¼Œå¾ˆä¸é”™å“¦ï¼ğŸ¥¤",
                    "ä»Šå¤©çš„é¥®æ°´æƒ…å†µè¿˜ä¸é”™ï¼Œè¦ç»§ç»­åšæŒï¼ğŸ’«",
                    "æ‡‚å¾—å–æ°´çš„é‡è¦æ€§ï¼Œæ˜¯ä¸ªèªæ˜çš„å­©å­ï¼âœ¨"
                ],
                normal: [
                    "è¦è®°å¾—å¤šå–æ°´å“¦ï¼Œå¯¹èº«ä½“å¥½ï¼ğŸ’§",
                    "å–æ°´æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œè¦æ…¢æ…¢åŸ¹å…»å‘¢ï¼ğŸŒˆ",
                    "è€å¸ˆä¼šæé†’ä½ å–æ°´ï¼Œè¦è®°å¾—å“¦ï¼ğŸŒº",
                    "è®©æˆ‘ä»¬ä¸€èµ·å…»æˆå–æ°´çš„å¥½ä¹ æƒ¯ï¼ğŸ’"
                ]
            },
            attitude: {
                excellent: [
                    "ä»Šå¤©è¡¨ç°éå¸¸æ£’ï¼Œè®¤çœŸå¬è®²ï¼Œç§¯æå‚ä¸ï¼ğŸŒŸ",
                    "å­¦ä¹ æ€åº¦å¾ˆå¥½ï¼Œæ˜¯ä¸ªçˆ±æ€è€ƒçš„å¥½å­©å­ï¼ğŸ’«",
                    "ä¸Šè¯¾ä¸“æ³¨åŠ›å¾ˆå¼ºï¼Œç§¯æå›ç­”é—®é¢˜ï¼ŒçœŸæ£’ï¼ğŸ‘",
                    "ä¹äºå¸®åŠ©åŒå­¦ï¼Œå¾ˆæœ‰çˆ±å¿ƒï¼Œè®©è€å¸ˆå¾ˆæ¬£æ…°ï¼â¤ï¸"
                ],
                good: [
                    "è¯¾å ‚å‚ä¸åº¦ä¸é”™ï¼Œç»§ç»­ä¿æŒç§¯ææ€§ï¼ğŸ“š",
                    "èƒ½å¤Ÿè®¤çœŸå¬è®²ï¼Œè¡¨ç°ä¸é”™ï¼âœ¨",
                    "æœ‰åœ¨è®¤çœŸå­¦ä¹ ï¼Œå¯ä»¥æ›´åŠ ç§¯æäº›ï¼ğŸ’«",
                    "ä¸Šè¯¾æ€åº¦è‰¯å¥½ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸŒŸ"
                ],
                normal: [
                    "è¦å¤šå¤šé›†ä¸­æ³¨æ„åŠ›å“¦ï¼Œä½ å¯ä»¥çš„ï¼ğŸ’ª",
                    "ä¸Šè¯¾è¦æ›´ä¸“å¿ƒä¸€ç‚¹ï¼Œç›¸ä¿¡ä½ èƒ½åšåˆ°ï¼âœ¨",
                    "è€å¸ˆç›¸ä¿¡ä½ å¯ä»¥è¡¨ç°å¾—æ›´å¥½ï¼ğŸŒˆ",
                    "è®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›æé«˜ä¸“æ³¨åŠ›ï¼ğŸŒº"
                ]
            }
        };
        
        // åˆå§‹åŒ–é¡µé¢æ—¶å¡«å……è¯„è¯­é€‰é¡¹
        document.addEventListener('DOMContentLoaded', function() {
            initializeCommentSelectors();
            initializePhotoUploads();
        });
        
        // åˆå§‹åŒ–è¯„è¯­é€‰æ‹©å™¨
        function initializeCommentSelectors() {
            const categories = ['homework', 'dictation', 'water', 'attitude'];
            const levels = {
                'excellent': 'â­â­â­ è¡¨ç°ä¼˜ç§€',
                'good': 'â­â­ è¡¨ç°è‰¯å¥½',
                'normal': 'â­ ç»§ç»­åŠ æ²¹'
            };
        
            categories.forEach(category => {
                const select = document.getElementById(`${category}Select`);
                
                // æ¸…ç©ºç°æœ‰é€‰é¡¹
                select.innerHTML = '<option value="">é€‰æ‹©è¯„è¯­...</option>';
        
                // æ·»åŠ è¯„è¯­é€‰é¡¹
                Object.entries(levels).forEach(([level, label]) => {
                    const group = document.createElement('optgroup');
                    group.label = label;
        
                    presetComments[category][level].forEach((comment, index) => {
                        const option = document.createElement('option');
                        option.value = `${level}-${index}`;
                        option.textContent = comment.substring(0, 20) + '...';
                        group.appendChild(option);
                    });
        
                    select.appendChild(group);
                });
            });
        }
        
        // åˆå§‹åŒ–ç…§ç‰‡ä¸Šä¼ 
        function initializePhotoUploads() {
            document.querySelectorAll('input[type="file"]').forEach(input => {
                input.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            const photoBox = input.parentElement;
                            photoBox.innerHTML = '';
                            photoBox.appendChild(img);
                        }
                        reader.readAsDataURL(file);
                    }
                });
            });
        }
        
        // è®¾ç½®è¯„åˆ†
        function setRating(category, score) {
            const buttons = document.querySelectorAll(`#${category}Rating .emoji-btn`);
            buttons.forEach((btn, index) => {
                btn.classList.toggle('active', index + 1 === score);
            });
        }
        
        // æ›´æ–°è¯„è¯­
        function updateComment(category, value) {
            if (!value) return;
            
            const textarea = document.getElementById(`${category}Comment`);
            const [level, index] = value.split('-');
            textarea.value = presetComments[category][level][index];
        }
        
        // ç”ŸæˆæŠ¥å‘Š
        function generateReport() {
            const studentName = document.getElementById('studentName').value;
            const className = document.getElementById('className').value;
        
            if (!studentName || !className) {
                alert('è¯·å¡«å†™å°æœ‹å‹å§“åå’Œç­çº§ï¼');
                return;
            }
        
            const reportHTML = `
                <div class="preview-header">
                    <h2 style="color: #2c5282; font-size: 24px; margin-bottom: 10px;">
                        ${studentName} å°æœ‹å‹çš„æˆé•¿è®°å½•
                    </h2>
                    <p style="color: #4a5568;">${className}</p>
                </div>
                
                <div class="preview-content">
                    <div class="preview-photos">
                        ${Array.from(document.querySelectorAll('.photo-box img')).map(img => 
                            `<div style="aspect-ratio: 4/3; overflow: hidden; border-radius: 8px;">
                                <img src="${img.src}" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>`
                        ).join('')}
                    </div>
        
                    <div class="preview-comments">
                        ${['homework', 'dictation', 'water', 'attitude'].map(category => `
                            <div class="preview-comment">
                                <h3 style="color: #2c5282; margin-bottom: 8px;">
                                    ${getCategoryTitle(category)}
                                </h3>
                                <p style="color: #4a5568; line-height: 1.6;">
                                    ${document.getElementById(category + 'Comment').value || 'æš‚æ— è¯„ä»·'}
                                </p>
                            </div>
                        `).join('')}
                    </div>
        
                </div>
            `;
        
            document.getElementById('previewSection').style.display = 'block';
            document.getElementById('reportPreview').innerHTML = reportHTML;
        }
        
        // è·å–ç±»åˆ«æ ‡é¢˜
        function getCategoryTitle(category) {
            const titles = {
                homework: 'ğŸ“š åŠŸè¯¾è¡¨ç°',
                dictation: 'âœï¸ å¬å†™è¿›æ­¥',
                water: 'ğŸ’§ é¥®æ°´ä¹ æƒ¯',
                attitude: 'ğŸŒŸ å­¦ä¹ æ€åº¦'
            };
            return titles[category];
        }
        
        // ä¸‹è½½æŠ¥å‘Š
        function downloadReport() {
            const element = document.getElementById('reportPreview');
            const studentName = document.getElementById('studentName').value || 'å°æœ‹å‹';
            
            html2canvas(element, {
                scale: 2,
                backgroundColor: '#ffffff',
                logging: false,
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `${studentName}_æˆé•¿è®°å½•.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
        
        // é‡ç½®è¡¨å•
        function resetForm() {
            document.querySelectorAll('input[type="text"]').forEach(input => input.value = '');
            document.querySelectorAll('textarea').forEach(textarea => textarea.value = '');
            document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
            document.querySelectorAll('.emoji-btn').forEach(btn => btn.classList.remove('active'));
            
            document.querySelectorAll('.photo-box').forEach(box => {
                const defaultText = box.querySelector('span')?.textContent || 'æ·»åŠ ç…§ç‰‡';
                box.innerHTML = `<span>${defaultText}</span>`;
            });
            
            document.getElementById('previewSection').style.display = 'none';
        }
        </script>
        Last edited 34åˆ†é’Ÿå‰
        
        
        
</body>
</html>
